{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","equal","a","b","sort","join","prop","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","element","focusElement","section","focusSection","paragraph","focusParagraph","paragraphs","focusParagraphs","detail","focusDetail","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","p","tagName","textContent","innerText","trim","currentSection","appendChild","insertBefore","nextSibling","moveToStart","renameElements","on","names","removeInlineStyle","removeExtraNodes","removeExtraNode","curr","prev","nodes","children","len","nodeType","TEXT_NODE","appendData","ELEMENT_NODE","innerHTML","parentNode","s","schema","toLowerCase","type","handleEmptyParagraph","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","href","title","i","br","keys","tag","attrs","attrName","args","attrType","push","handler","list","once","_once","off","emit","arguments","apply","bind","node","toUpperCase","getSelection","focusNode","focusType","focusTo","textBefore","selection","offset","focusOffset","substringData","textAfter","focus","collapse","moveToEnd","range","createRange","selectNodeContents","removeAllRanges","addRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","selectAllText","insertElement","deleteContents","insertNode","Error","exec","cb","compose","fns","err","set","val","get","_set","last","pop","undefined","update","toJSON","sync","sections","shouldBeDelete","_scan","getAttribute","genName","child","handleUnknownElement","getOffset","start","end","attribute","dataset","createTextNode","replaceChild","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","default","addEventListener","onKeydown","body","setTimeout","walk","first","remove","childContext"],"mappings":"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"}