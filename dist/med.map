{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","basic","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","addEventListener","focusElement","textContent","innerText","trim","innerHTML","tagName","textAfter","textBefore","p","previousElementSibling","section","currentSection","appendChild","insertBefore","nextSibling","moveToStart","focusTo","schema","type","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","a","href","title","b","i","br","keys","tag","attrs","attrName","args","attrType","push","on","handler","list","once","_once","off","len","emit","arguments","apply","bind","node","toUpperCase","getSelection","focusNode","nodeType","ELEMENT_NODE","parentNode","selection","offset","focusOffset","substringData","focus","collapse","moveToEnd","range","createRange","selectNodeContents","removeAllRanges","addRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","selectAllText","insertElement","deleteContents","insertNode","Error","exec","cb","fns","err","set","val","_set","last","pop","undefined","get","update","toJSON","sync","paragraphs","sections","shouldBeDelete","_scan","toLowerCase","getAttribute","genName","children","child","handleUnknownElement","paragraph","detail","getOffset","start","end","attribute","dataset","createTextNode","replaceChild","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","prev","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","onKeydown","body","first","remove"],"mappings":"CAOC,SAAWA,GACV,YAsWF,SAASC,KACPC,KAAKC,UAgDP,QAASC,GAAMC,GACbH,KAAKG,OAASA,EA2IhB,QAASC,KACPJ,KAAKK,cAqCP,QAASC,GAAKC,GACZP,KAAKO,GAAKA,EACVP,KAAKQ,UAAW,EAChBR,KAAKS,QACLT,KAAKU,OAgEP,QAASC,KACPX,KAAKY,UAAY,KACjBZ,KAAKS,QA2OP,QAASI,MAqHT,QAASC,GAAOC,GACdhB,EAAQiB,KAAKhB,MACbI,EAAWY,KAAKhB,MAChBW,EAAQK,KAAKhB,MACba,EAAYG,KAAKhB,MAEjBA,KAAKe,QAAUE,EAAMC,MAAMC,OAAOC,OAAOC,GAAiBN,GAC1Df,KAAKsB,WACLtB,KAAKsB,QAAQnB,OAASH,IAEtB,IAAIuB,GAAKvB,KAAKe,QAAQQ,EAEjBA,KACHA,EAAKC,SAASC,cAAc,QAG9BF,EAAGG,aAAa,mBAAmB,GACnCH,EAAGI,UAAUC,IAAI,OAEjB5B,KAAKuB,GAAKA,EACVvB,KAAK6B,MAAQ,GAAI3B,GAAMF,MAEvBA,KAAK8B,aACL9B,KAAK+B,cAEL/B,KAAKgC,IAAIC,EAAYC,QACrBlC,KAAKgC,IAAIC,EAAYE,MAAMnC,OAxgCP,mBAAXoC,QACTA,OAAOC,QAAUvB,EACU,kBAAXwB,SAA+C,gBAAfA,QAAOC,IACvDD,OAAO,WACL,MAAOxB,KAGThB,EAAO0C,IAAM1B,CAEf,IAAIG,KAEJA,GAAMC,MAAQ,SAAUuB,EAAIC,GAO1B,MANAvB,QACGwB,oBAAoBD,GACpBE,QAAQ,SAAUC,GACjB,GAAIC,GAAO3B,OAAO4B,yBAAyBL,EAAIG,EAC/C1B,QAAO6B,eAAeP,EAAII,EAAMC,KAE7BL,GAGTxB,EAAMgC,aAAe,SAAUC,GAC7B,MAAOA,GAAEC,eACLD,EAAEC,iBACFD,EAAEE,aAAc,GAGtBnC,EAAMoC,GAAK,WACT,GAAIC,GAAYC,UAAUD,SAC1B,SAAQ,GACN,IAAK,OAAOE,KAAKF,GACf,MAAO,KACT,KAAK,OAAOE,KAAKF,GACf,MAAO,SACT,KAAK,SAASE,KAAKF,GACjB,MAAO,OACT,SACE,MAAO,YAIbrC,EAAMwC,KAAO,SAAUC,EAAKC,GAI1B,MAHmB,gBAARD,IAA0C,gBAAfA,GAAIE,QACxCC,MAAMC,UAAUlB,QAAQ5B,KAAK0C,EAAKC,GAE7BD,GAGTzC,EAAM8C,MAAQ,SAAUC,EAAWC,GACjC,GAAIC,GAAK,GAAIC,QAAO,OAASF,EAAO,IACpC,OAAOD,GACJI,QAAQF,EAAI,KACZH,MAAME,GACNI,IAAI,SAAUC,GACb,MAAOA,GAAIF,QAAQ,UAAWH,MAIpChD,EAAMsD,MAAQ,SAAUC,GACtB,GAAI,OAASA,GAAO,gBAAoBA,GACtC,MAAOA,EAGT,IAAIA,YAAeC,MAAM,CACvB,GAAIC,GAAO,GAAID,KAEf,OADAC,GAAKC,QAAQH,EAAII,WACVF,EAGT,GAAIF,YAAeX,OACjB,MAAOW,GAAIK,OAGb,IAAIH,KAEJ,KAAK,GAAII,KAAQN,GACXA,EAAIO,eAAeD,KACrBJ,EAAKI,GAAQ7D,EAAMsD,MAAMC,EAAIM,IAIjC,OAAOJ,GAET,IAAIM,KAEJA,GAASC,WACPC,IAAK,UACLC,GAAI,UACJC,GAAI,UACJC,GAAI,MACJC,GAAI,OACJC,GAAI,SAGNP,EAASX,KACPmB,EAAG,YACHC,EAAG,MACHC,GAAI,QACJC,GAAI,WACJC,GAAI,MACJC,GAAI,QACJC,GAAI,OACJC,GAAI,KACJC,GAAI,QACJC,GAAI,QAGNjB,EAASkB,MAAuB,QAAfjF,EAAMoC,KACnB,UACA,MACJ,IAAIpB,KAEJA,GAAYC,KAAO,WACjB,MAAO,UAAUiE,GACf,GAAIjD,GAAIlD,KAAKoG,MACTC,EAAOnD,EAAEoD,SAAWpD,EAAEqD,MACtBC,EAAMxB,EAASC,UAAUoB,EAE7B,KAAIG,EAAJ,CAaA,GATAxG,KAAKyG,KAAOvD,EAAEwD,QACd1G,KAAK2G,OAAS3G,KAAK4G,IAAM1D,EAAE2D,OAC3B7G,KAAK8G,MAAQ5D,EAAE6D,SACf/G,KAAKgH,QAAUhH,KAAKiH,KAAO/D,EAAEgE,QAC7BlH,KAAKqG,KAAOA,EACZrG,KAAKmH,IAAMnC,EAASX,IAAIgC,GACxBrG,KAAKkG,MAAQlG,KAAKgF,EAASkB,OAC3BlG,KAAKoG,MAAQlD,EAEI,cAAblD,KAAKmH,KAAuBnH,KAAKG,OAAOiH,UAE1C,WADApH,MAAKqH,SAIP,IAAIC,GAAMnH,OAAOoB,GAAGgG,iBAAiB,8BAErC1D,OAAMC,UAAUlB,QAAQ5B,KAAKsG,EAAK,SAAU/F,GAC1CA,EAAGiG,cAAcC,YAAYlG,KAG/B4E,OAIJlE,EAAYE,MAAQ,SAAUhC,GAU5B,MARAA,GAAOoB,GAAGmG,iBAAiB,OAAQ,WACjC,GAAInG,GAAKpB,EAAO0B,MAAM8F,aAAa,IAE/BpG,MAAQA,EAAGqG,aAAerG,EAAGsG,WAAa,IAAIC,SAChDvG,EAAGwG,UAAY,kCAIZ,SAAU5B,GACf,GAAI5E,GAAKpB,EAAO0B,MAAM8F,cAEtB,IAAmB,YAAfpG,EAAGyG,QACL,MAAOhI,MAAKqH,SAGd,IAAmB,MAAf9F,EAAGyG,QACL,MAAO7B,IAGT,IAAiB,UAAbnG,KAAKmH,MAAoBnH,KAAK8G,MAGhC,GAFA9G,KAAKqH,WAEC9F,EAAGqG,aAAerG,EAAGsG,WAAa,IAAIC,OAwBrC,GAAK3H,EAAO0B,MAAMoG,UAAU1G,GAAIuG,QAMhC,GAAI3H,EAAO0B,MAAMqG,WAAW3G,GAAIuG,OAAQ,CAI7C,GAAIK,GAAIhI,EAAO0B,MAAMkC,MAAMxC,EAC3B4G,GAAEzG,aAAa,OAAQ,IAEjByG,EAAEP,aAAeO,EAAEN,YACvBM,EAAEJ,UAAY,oCAEX,IAAIxG,EAAG6G,uBAAwB,CAIpC,GAAIC,GAAU7G,SAASC,cAAc,WACjC6G,EAAiBnI,EAAO0B,MAAM8F,aAAa,WAC3CQ,EAAIhI,EAAO0B,MAAMkC,MAAMxC,EAE3BA,GAAK4G,EAAEC,uBAGPD,EAAEzG,aAAa,OAAQ,IAGvB2G,EAAQE,YAAYJ,GAEdA,EAAEP,aAAeO,EAAEN,YACvBM,EAAEJ,UAAY,gCAGZO,EACFA,EACGd,cACAgB,aAAaH,EAASC,EAAeG,aAExCtI,EAAOoB,GAAGgH,YAAYF,IAGlB9G,EAAGqG,aAAerG,EAAGsG,WAAa,IAAIC,QAC1CvG,EAAGiG,cAAcC,YAAYlG,GAG/BpB,EAAO0B,MAAM6G,YAAYP,QAhDoB,CAE7C,GAAIA,GAAI3G,SAASC,cAAc,IAC/B0G,GAAEJ,UAAY,+BACdxG,EAAGiG,cAAcgB,aAAaL,EAAG5G,EAAGkH,aACpCtI,EAAO0B,MAAM8G,QAAQR,OA7B6B,CAGlD,GAAIE,GAAU7G,SAASC,cAAc,WACjC6G,EAAiBnI,EAAO0B,MAAM8F,aAAa,UAE/CpG,GAAGwG,UAAY,+BAEXO,GACGA,EAAeV,aAAeU,EAAeT,WAAa,IAAIC,SACjEO,EAAQE,YAAYhH,GACpB+G,EACGd,cACAgB,aAAaH,EAASC,EAAeG,aACxCtI,EAAO0B,MAAM6G,YAAYnH,KAM3B8G,EAAQE,YAAYhH,GACpBpB,EAAOoB,GAAGgH,YAAYF,GACtBlI,EAAO0B,MAAM6G,YAAYnH,IAsD/B4E,KAGJ,IAAIyC,IACFP,SACEQ,KAAM,WAGRC,IACED,KAAM,YACNE,KAAM,WAGRC,IACEH,KAAM,YACNE,KAAM,WAGRE,IACEJ,KAAM,YACNE,KAAM,WAGRG,IACEL,KAAM,YACNE,KAAM,WAGRI,IACEN,KAAM,YACNE,KAAM,WAGRK,IACEP,KAAM,YACNE,KAAM,WAGRZ,GACEU,KAAM,YACNE,KAAM,WAGRM,YACER,KAAM,YACNE,KAAM,UACNO,UAAW,gBAGbC,QACEV,KAAM,YACNW,WAAY,eACZC,QAAS,mBAGXC,IACEb,KAAM,cAGRc,IACEd,KAAM,cAGRe,IACEf,KAAM,YACNE,KAAM,WAGRc,GACEhB,KAAM,SACNiB,KAAM,YACNC,MAAO,aAGTC,GACEnB,KAAM,UAGRoB,GACEpB,KAAM,UAGRqB,IACErB,KAAM,UAIV1H,QAAOgJ,KAAKvB,GAAQhG,QAAQ,SAAUoF,GACpC,GAAIoC,GAAMxB,EAAOZ,GACba,EAAOuB,EAAIvB,KACXwB,WAEGD,GAAIvB,KAEX1H,OAAOgJ,KAAKC,GAAKxH,QAAQ,SAAU0H,GACjC,GAAIxF,GAAOsF,EAAIE,GACXC,EAAOzF,EAAKf,MAAM,KAClByG,EAAWD,EAAKzD,OAEpBuD,GAAMI,MACJ5H,KAAM0H,EAAK,IAAMD,EACjBzB,KAAM2B,EACND,KAAMA,MAIV3B,EAAOZ,IACLa,KAAMA,EACNwB,MAAOA,KAOXtK,EAAQ+D,UAAU4G,GAAK,SAAUtE,EAAOuE,GACtC,GAAIC,GAAO5K,KAAKC,OAAOmG,MAGvB,OAFAwE,GAAKH,KAAKE,GACV3K,KAAKC,OAAOmG,GAASwE,EACd5K,MAGTD,EAAQ+D,UAAU+G,KAAO,SAAUzE,EAAOuE,GAGxC,MAFAA,GAAQG,OAAQ,EAChB9K,KAAK0K,GAAGtE,EAAOuE,GACR3K,MAGTD,EAAQ+D,UAAUiH,IAAM,SAAU3E,EAAOuE,GACvC,GAAqB,kBAAVvE,GAAsB,CAC/BuE,EAAUvE,CACV,KAAKA,IAASpG,MAAKC,OACjBD,KAAK+K,IAAI3E,EAAOuE,EAElB,OAAO3K,MAMT,IAHA,GAAI4K,GAAO5K,KAAKC,OAAOmG,GACnB4E,EAAMJ,EAAKhH,OAERoH,GAAO,GACRL,IAAYC,EAAKI,IACnBJ,EAAK7G,MAAMiH,EAAK,EAIpB,OAAOhL,OAGTD,EAAQ+D,UAAUmH,KAAO,WACvB,GAAIV,GAAO1G,MAAMC,UAAUe,MAAM7D,KAAKkK,WAClC9E,EAAQmE,EAAKzD,QACb8D,EAAO5K,KAAKC,OAAOmG,MAMvB,OAJAwE,GAAKhI,QAAQ,SAAU+H,GACrBA,EAAQQ,MAAMnL,KAAMuK,IACpBa,KAAKpL,OAEAA,MAMTE,EAAM4D,UAAU6D,aAAe,SAAUK,GACvC,GAAIqD,EAEJ,IAAIrD,EAAS,CAKX,IAJAqD,EAAOrL,KAAK2H,eAEZK,EAAUA,EAAQsD,cAEXD,GAAQA,EAAKrD,UAAYA,GAC9BqD,EAAOA,EAAK7D,aAGd,OAAQ6D,IAAQA,EAAKrD,UAAYA,EAC7BqD,EACA,KAIJ,IAFAA,EAAO7J,SAAS+J,eAAeC,UAExBH,GAAQA,EAAKI,WAAajK,SAASkK,cACxCL,EAAOA,EAAKM,UAGd,OAAON,IAIXnL,EAAM4D,UAAU6E,QAAU,SAAUpH,GAC9BA,EAAGwG,UAAUD,OACf9H,KAAK0I,YAAYnH,IAEjBA,EAAGwG,UAAY,IACf/H,KAAK0I,YAAYnH,GACjBA,EAAGwG,UAAY,KAInB7H,EAAM4D,UAAUoE,WAAa,WAC3B,GAAI0D,GAAYpK,SAAS+J,eACrBF,EAAOO,EAAUJ,UACjBK,EAASD,EAAUE,WAEvB,OAAIT,GAAKI,WAAajK,SAASkK,aACtB,GAGFL,EAAKU,cAAc,EAAGF,IAG/B3L,EAAM4D,UAAUmE,UAAY,WAC1B,GAAI2D,GAAYpK,SAAS+J,eACrBF,EAAOO,EAAUJ,UACjBK,EAASD,EAAUE,WAEvB,OAAIT,GAAKI,WAAajK,SAASkK,aACtB,GAGFL,EAAKU,cAAcF,EAAQR,EAAKzH,OAAS,IAGlD1D,EAAM4D,UAAU4E,YAAc,SAAUnH,GACtCA,EAAGyK,QACHxK,SAAS+J,eAAeU,SAAS1K,GAAI,IAGvCrB,EAAM4D,UAAUoI,UAAY,SAAU3K,GACpC,GAAI4K,GAAQ3K,SAAS4K,cACjBR,EAAY9L,EAAOyL,cACvBY,GAAME,mBAAmB9K,GACzB4K,EAAMF,UAAS,GACfL,EAAUU,kBACVV,EAAUW,SAASJ,IAGrBjM,EAAM4D,UAAUC,MAAQ,SAAUxC,GAChC,GAAIqK,GAAYpK,SAAS+J,eACrBF,EAAOO,EAAUJ,UACjBK,EAASD,EAAUE,YACnBK,EAAQ3K,SAAS4K,cACjBI,EAAc3I,MAAMC,UAAU2I,QAAQzL,KAAKO,EAAGoK,WAAWe,WAAYnL,EAEzE4K,GAAMQ,SAASpL,EAAGoK,WAAYa,GAC9BL,EAAMS,OAAOvB,EAAMQ,EAEnB,IAAIgB,GAAOV,EAAMW,iBAIjB,OAFAvL,GAAGoK,WAAWnD,aAAaqE,EAAMtL,GAE1BA,GAGTrB,EAAM4D,UAAUiJ,KAAO,WACrB,GACIZ,GADAP,EAAYpK,SAAS+J,cAGpBK,KAIDA,EAAUoB,aACZb,EAAQP,EAAUqB,WAAW,IAG/BjN,KAAKkN,OAASf,IAGhBjM,EAAM4D,UAAUqJ,QAAU,WACxB,GAAIhB,GAAQnM,KAAKkN,MAEjB,IAAIf,EAAO,CACT,GAAIiB,GAAI5L,SAAS4K,cACbR,EAAYpK,SAAS+J,cAEzB6B,GAAET,SAASR,EAAMkB,eAAgBlB,EAAMmB,aACvCF,EAAER,OAAOT,EAAMoB,aAAcpB,EAAMqB,WACnC5B,EAAUU,kBACVV,EAAUW,SAASa,KAIvBlN,EAAM4D,UAAU2J,cAAgB,SAAUlM,GACxC,GAAIqK,GAAY9L,EAAOyL,eACnBY,EAAQ3K,SAAS4K,aACrBD,GAAME,mBAAmB9K,GACzBqK,EAAUU,kBACVV,EAAUW,SAASJ,IAGrBjM,EAAM4D,UAAU4J,cAAgB,SAAUnM,GACxC,GAAIqK,GAAYpK,SAAS+J,eACrBY,EAAQP,EAAUqB,WAAW,EAEjCd,GAAMwB,iBAENxB,EAAMyB,WAAWrM,IAMnBnB,EAAW0D,UAAU9B,IAAM,SAAU2B,GACnC,GAAkB,kBAAPA,GACT,KAAM,IAAIkK,OAAM,yCAKlB,OAFA7N,MAAKK,WAAWoK,KAAK9G,GAEd3D,MAGTI,EAAW0D,UAAUgK,KAAO,SAAUpK,EAAKqK,GACzC,GAAIC,GAAMhO,KAAKK,WACX4J,EAAI,EAEJ9D,EAAO,SAAU8H,GACnB,GAAIA,EACF,MAAOF,GAAGE,EAGZ,IAAItK,GAAKqK,EAAI/D,IAEb,KAAKtG,EACH,MAAOoK,IAGT,KACEpK,EAAG3C,KAAK0C,EAAKyC,GACb,MAAOjD,GACP6K,EAAG7K,IAIPiD,MASF7F,EAAKwD,UAAUoK,IAAM,SAAU/G,EAAKgH,GAGlC,MAFAnO,MAAKU,IAAIyG,GAAOgH,EAChBnO,KAAKQ,UAAW,EACTR,MAGTM,EAAKwD,UAAUsK,KAAO,SAAUjH,EAAKgH,GAKnC,IAJA,GAAIhE,GAAOlJ,EAAM8C,MAAMoD,EAAK,KACxBkH,EAAOlE,EAAKmE,MACZ7N,EAAOT,KAAKS,KAET0G,EAAMgD,EAAKrD,SAEdrG,EADgB8N,SAAd9N,EAAK0G,GACA1G,EAAK0G,MAEL1G,EAAK0G,EAShB,OALI1G,GAAK4N,KAAUF,IACjBnO,KAAKQ,UAAW,EAChBC,EAAK4N,GAAQF,GAGRnO,MAGTM,EAAKwD,UAAU0K,IAAM,SAAUrH,GAC7B,GAAInH,KAAKU,IAAIyG,GACX,MAAOnH,MAAKU,IAAIyG,EAKlB,KAFA,GAAIgD,GAAOlJ,EAAM8C,MAAMoD,EAAK,KAErBA,EAAMgD,EAAKrD,SAAS,CACzB,GAAayH,SAAT9N,KACF,MAEAA,MAAOA,KAAK0G,GAIhB,MAAO1G,OAGTH,EAAKwD,UAAU2K,OAAS,WACtB,GAAI/N,GAAMV,KAAKU,GASf,OAPAS,QAAOgJ,KAAKzJ,GAAKkC,QAAQ,SAAUuE,GACjCnH,KAAKoO,KAAKjH,EAAKzG,EAAIyG,KACnBiE,KAAKpL,OAEPA,KAAKQ,UAAW,EAChBR,KAAKU,OAEEV,MAGTM,EAAKwD,UAAU4K,OAAS,WACtB,MAAOzN,GAAMsD,MAAMvE,KAAKS,OAO1BE,EAAQmD,UAAU6K,KAAO,WACvB,GAAI/N,IACFgO,cACAC,aAGEpO,EAAOT,KAAKS,KAEZqO,IAEJ3N,QAAOgJ,KAAK1J,GAAMmC,QAAQ,SAAUC,GAClCiM,EAAejM,GAAQ,IAGzB7C,KAAK+O,MAAM/O,KAAKuB,GAAIX,EAAWkO,GAE/B3N,OAAOgJ,KAAK2E,GAAgBlM,QAAQ,SAAUC,SACrCpC,GAAKoC,KAGd7C,KAAKY,UAAYA,GAGnBD,EAAQmD,UAAUiL,MAAQ,SAAUxN,EAAIX,EAAWkO,GACjD,GAAI9G,GAAUzG,EAAGyG,QAAQgH,cACrBnM,EAAOtB,EAAG0N,aAAa,QACvBxO,EAAOT,KAAKS,KAAKoC,GACjB+F,EAAS5I,KAAK4I,OAAOZ,EAEzB,OAAKY,IAOD/F,SACKiM,GAAejM,GAGnBpC,IACEoC,IACHA,EAAO7C,KAAKe,QAAQmO,WAGtBzO,EAAO,GAAIH,GAAKuC,GAChBpC,EAAKyN,IAAI,MAAOlG,GAChBhI,KAAKS,KAAKoC,GAAQpC,EAElBc,EAAGG,aAAa,OAAQjB,EAAKF,KAG/BI,EAAQiI,EAAOC,MAAM7H,KAAKhB,KAAMuB,EAAId,EAAMG,EAAWkO,GAErDlG,EAAOyB,MAAMzH,QAAQ,SAAUkC,GAC7BnE,EAAQmE,EAAK+D,MAAM7H,KAAKhB,KAAMuB,EAAId,EAAMqE,IACxCsG,KAAKpL,OAEHS,EAAKD,WACPC,EAAKgO,SACLzO,KAAKiL,KAAK,UAAWxK,IAGhBA,OAjCLQ,GAAMwC,KAAKlC,EAAG4N,SAAU,SAAU5N,GAChCvB,KAAK+O,MAAMxN,EAAIX,EAAWkO,IAC1B1D,KAAKpL,QAkCXW,EAAQ0H,QAAU,SAAU9G,EAAId,EAAMG,EAAWkO,GAC/C,GAAI3G,KAEJlH,GAAMwC,KAAKlC,EAAG4N,SAAU,SAAUC,GAChC,GAAIxG,GAAS5I,KAAK4I,OAAOwG,EAAMpH,QAAQgH,cAEvC,OAAKpG,KAKChI,EAAUiO,SAASpC,QAAQhM,EAAKF,KACpCK,EAAUiO,SAASpE,KAAKhK,EAAKF,SAG3B,aAAaiD,KAAKoF,EAAOC,OAC3BV,EAAEsC,KAAKzK,KAAK+O,MAAMK,EAAOxO,EAAWkO,GAAgBvO,UATpDI,GAAQ0O,qBAAqBD,IAY/BhE,KAAKpL,OAEPS,EAAKyN,IAAI,QAAStN,EAAUgO,WAAWhL,QACvCnD,EAAKyN,IAAI,MAAOrK,MAAMC,UAAU2G,KAAKU,MAAMvK,EAAUgO,WAAYzG,KAGnExH,EAAQiO,WAAa,SAAUrN,EAAId,EAAMG,EAAWkO,GAClD,GAAI3G,KAEJlH,GAAMwC,KAAKlC,EAAG4N,SAAU,SAAUC,GAChC,GAAIxG,GAAS5I,KAAK4I,OAAOwG,EAAMpH,QAAQgH,cAEvC,OAAKpG,IAKLhI,EAAUiO,SAASpE,KAAKhK,EAAKF,SAET,cAAhBqI,EAAOC,MACTV,EAAEsC,KAAKzK,KAAK+O,MAAMK,EAAOxO,EAAWkO,GAAgBvO,UAPpDI,GAAQ0O,qBAAqBD,IAS/BhE,KAAKpL,OAEPS,EAAKyN,IAAI,QAAStN,EAAUgO,WAAWhL,QACvCnD,EAAKyN,IAAI,MAAOrK,MAAMC,UAAU2G,KAAKU,MAAMvK,EAAUgO,WAAYzG,KAGnExH,EAAQ2O,UAAY,SAAU/N,EAAId,EAAMG,EAAWkO,GACjD,GAAIS,KAEJtO,GAAMwC,KAAKlC,EAAG4N,SAAU,SAAUC,GAChC,GAAIxG,GAAS5I,KAAK4I,OAAOwG,EAAMpH,QAAQgH,cAEvC,OAAKpG,IAKLhI,EAAUiO,SAASpE,KAAKhK,EAAKF,SAET,WAAhBqI,EAAOC,MACT0G,EAAO9E,KAAKzK,KAAK+O,MAAMK,EAAOxO,EAAWkO,GAAgBvO,UAPzDI,GAAQ0O,qBAAqBD,IAS/BhE,KAAKpL,OAEPS,EAAKyN,IAAI,SAAUqB,IAGrB5O,EAAQ4O,OAAS,SAAUhO,EAAId,GAC7B,GAAIoL,GAASlL,EAAQ6O,UAAUjO,EAC/Bd,GAAKyN,IAAI,QAASrC,EAAO4D,OACzBhP,EAAKyN,IAAI,MAAOrC,EAAO6D,MAGzB/O,EAAQgP,UAAY,SAAUpO,EAAId,EAAMqE,GACtC,GAAIqJ,GAAM5M,EAAG0N,aAAanK,EAAKjC,KAC/BpC,GAAKyN,IAAIpJ,EAAKjC,KAAMsL,IAGtBxN,EAAQiP,QAAU,SAAUrO,EAAId,EAAMqE,GACpC,GAAIqJ,GAAM5M,EAAG0N,aAAa,QAAUnK,EAAKjC,KACzCpC,GAAKyN,IAAIpJ,EAAKjC,KAAMsL,IAGtBxN,EAAQ8I,QAAU,SAAUlI,EAAId,EAAMqE,GACpC,GAAIiE,GAAOxH,EAAGqG,aAAerG,EAAGsG,SAChCpH,GAAKyN,IAAIpJ,EAAKjC,KAAMkG,IAGtBpI,EAAQ0O,qBAAuB,SAAU9N,GACvC,GAAIwH,GAAOxH,EAAGqG,aAAerG,EAAGsG,UAC5BwD,EAAO7J,SAASqO,eAAe9G,EACnCxH,GAAGiG,cAAcsI,aAAazE,EAAM9J,IAGtCZ,EAAQ6O,UAAY,SAAUjO,GAc5B,IAbA,GACIwO,GAAYC,EAAYtP,EADxB8G,EAAgBjG,EAAGoK,WAEnBE,GACF4D,MAAO,EACPC,IAAK,GAGHO,EAAQ,WACV,MAAOzI,IACFA,EAAciE,WAAajK,SAASkK,eACnClE,EAAcyH,aAAa,SAG5BgB,KACLzI,EAAgBA,EAAcA,aAahC,OAVIA,KACF9G,EAAMc,SAASC,cAAc,OAC7BoK,EAAO4D,MAAQjI,EAAcO,UAAU0E,QAAQlL,EAAG2O,WAClDH,EAAavI,EAAcO,UAAUoI,OAAO,EAAGtE,EAAO4D,OACtD/O,EAAIqH,UAAYgI,EAChBC,EAAatP,EAAIkH,aAAelH,EAAImH,WAAa,GACjDgE,EAAO4D,OAASM,EAAWnM,OAASoM,EAAWpM,OAC/CiI,EAAO6D,IAAM7D,EAAO4D,OAASlO,EAAGqG,aAAerG,EAAGsG,WAAa,IAAIjE,QAG9DiI,GAGTlL,EAAQmD,UAAU4K,OAAS,WA6BzB,QAASa,GAAO1M,GACd,GAAI0M,GAAS9O,EAAKoC,GACduN,EAAIb,GAAUA,EAAOb,YAIzB,OAFA0B,GAAEvN,KAAOA,EAEFuN,EAlCT,GAAIxP,GAAYZ,KAAKY,UACjBiO,EAAWjO,EAAUiO,SACrBD,EAAahO,EAAUgO,WACvBnO,EAAOT,KAAKS,KAEZ4P,GACFxB,YACAD,cA8BF,OA3BAC,GAASjM,QAAQ,SAAUC,GACzB,GAAIwF,GAAU5H,EAAKoC,GACfuN,EAAI/H,GAAWA,EAAQqG,YAC3B0B,GAAEvN,KAAOA,EACTwN,EAAKxB,SAASpE,KAAK2F,KAGrBxB,EAAWhM,QAAQ,SAAUC,GAC3B,GAAIyM,GAAY7O,EAAKoC,GACjBuN,EAAId,GAAaA,EAAUZ,YAE/B0B,GAAEvN,KAAOA,EAETuN,EAAEb,QAAUa,EAAEb,YAAclL,IAAIkL,GAEhCc,EAAKzB,WAAWnE,KAAK2F,KAYhBC,GAKTxP,EAAYiD,UAAUwM,SAAW,SAAUD,GACzC,GAAI9O,GAAKvB,KAAKuB,GACVsN,EAAWwB,EAAKxB,SAChBD,EAAayB,EAAKzB,UAEtBC,GAASjM,QAAQ,SAAUyF,EAAS4B,GAClC,GAGIA,GAAGqF,EAAWiB,EAHdC,EAAWjP,EAAGkP,cAAc,UAAYpI,EAAQxF,KAAO,MACvD6N,EAAO7B,EAAS5E,EAAI,GACpB0G,EAAQD,GAAQnP,EAAGkP,cAAc,UAAYC,EAAK7N,KAAO,KAQ7D,KALK2N,IACHA,EAAWhP,SAASC,cAAc4G,EAAQ+B,KAC1CoG,EAAS9O,aAAa,OAAQ2G,EAAQxF,OAGnCoH,EAAI5B,EAAQoH,MAAOxF,EAAI5B,EAAQqH,IAAKzF,GAAK,EAC5CqF,EAAYV,EAAW3E,GACvBsG,EAAaC,EAASC,cAAc,UAAYnB,EAAUzM,KAAO,MAE5D0N,IACHA,EAAa/O,SAASC,cAAc6N,EAAUlF,KAC9CmG,EAAW7O,aAAa,OAAQ4N,EAAUzM,OAG5ChC,EAAY+P,YAAY5P,KAAKhB,KAAMuQ,EAAYjB,GAC/CzO,EAAYgQ,aAAa7P,KAAKhB,KAAMuQ,EAAYjB,GAE3CiB,EAAW/I,eACdgJ,EAASjI,YAAYgI,EAIpBC,GAAShJ,gBACRmJ,EACFA,EAAMnJ,cAAcgB,aAAagI,EAAUG,EAAMlI,aAEjDzI,KAAKuB,GAAGgH,YAAYiI,KAGxBpF,KAAKpL,OAEPA,KAAK+B,eAGPlB,EAAYgQ,aAAe,SAAUtP,EAAId,GACvC,GAAIsI,GAAOxH,EAAGqG,aAAerG,EAAGsG,UAC5B0H,EAAS9O,EAAK8O,WACduB,EAAO,GACPC,EAAS,CAEbxB,GAAO3M,QAAQ,SAAUnC,GACvB,GAAIuQ,GAAUzP,EAAGkP,cAAc,UAAYhQ,EAAKoC,KAAO,KAElDmO,KACHA,EAAUxP,SAASC,cAAchB,EAAK2J,KACtC4G,EAAQtP,aAAa,OAAQjB,EAAKoC,OAGpChC,EAAY+P,YAAY5P,KAAKhB,KAAMgR,EAASvQ,GAEhB8N,SAAxByC,EAAQpJ,YACVoJ,EAAQnJ,UAAYkB,EAAKoH,OAAO1P,EAAKgP,MAAOhP,EAAKiP,IAAMjP,EAAKgP,OAE5DuB,EAAQpJ,YAAcmB,EAAKoH,OAAO1P,EAAKgP,MAAOhP,EAAKiP,IAAMjP,EAAKgP,OAGhEqB,GAAQ/H,EAAKoH,OAAOY,EAAQtQ,EAAKgP,MAAQsB,GACrCC,EAAQd,UAEZa,EAAStQ,EAAKiP,KACdtE,KAAKpL,OAEP8Q,GAAQ/H,EAAKoH,OAAOY,EAAQhI,EAAKnF,OAASmN,GAE1CxP,EAAGwG,UAAY+I,GAGjBjQ,EAAY+P,YAAc,SAAUrP,EAAId,GACtC,GAAImI,GAAS5I,KAAK4I,OAAOnI,EAAK2J,IAE9BxB,GAAOyB,MAAMzH,QAAQ,SAAUkC,GAC7BjE,EAAYiE,EAAK+D,MAAM7H,KAAKhB,KAAMuB,EAAId,EAAMqE,MAIhDjE,EAAY8O,UAAY,SAAUpO,EAAId,EAAMqE,GAC1CvD,EAAGG,aAAaoD,EAAKjC,KAAMpC,EAAKqE,EAAKjC,QAGvChC,EAAY+O,QAAU,SAAUrO,EAAId,EAAMqE,GACxCvD,EAAGG,aAAa,QAAUoD,EAAKjC,KAAMpC,EAAKqE,EAAKjC,QAGjDhC,EAAY4I,QAAU,SAAUlI,EAAId,EAAMqE,GACjByJ,SAAnBhN,EAAGqG,YACLrG,EAAGsG,UAAYpH,EAAKqE,EAAKjC,MAEzBtB,EAAGqG,YAAcnH,EAAKqE,EAAKjC,MAG/B,IAAIxB,IACF6N,QAAS,WACP,MAAO,uCAAuC9K,QAAQ,QAAS,SAAU6M,GACvE,GAAI7D,GAAoB,GAAhB8D,KAAKC,SAAgB,EAAGC,EAAU,MAANH,EAAY7D,EAAS,EAAJA,EAAU,CAC/D,OAAOgE,GAAEC,SAAS,OAIxBvQ,GAAOgD,UAAY3C,OAAOC,OAAOrB,EAAQ+D,WACzC7C,EAAMC,MAAMJ,EAAOgD,UAAW1D,EAAW0D,WACzC7C,EAAMC,MAAMJ,EAAOgD,UAAWnD,EAAQmD,WACtC7C,EAAMC,MAAMJ,EAAOgD,UAAWjD,EAAYiD,WA+B1ChD,EAAOgD,UAAU8E,OAASA,EAE1B9H,EAAOgD,UAAUhC,WAAa,WAC5B,GAAIP,GAAKvB,KAAKuB,GACV6J,EAAO7J,EAAGmG,iBAAiB0D,KAAK7J,EAEpC6J,GAAK,UAAWpL,KAAKsR,UAAUlG,KAAKpL,OACpCoL,EAAK,QAASpL,KAAK2O,KAAKvD,KAAKpL,OAC7BoL,EAAK,QAASpL,KAAK+B,YAAYqJ,KAAKpL,OACpCoL,EAAK,OAAQpL,KAAK+B,YAAYqJ,KAAKpL,OACnCoL,EAAK,QAASpL,KAAK+B,YAAYqJ,KAAKpL,QAGtCc,EAAOgD,UAAUwN,UAAY,SAAUpO,GACrC,GACIQ,GADAsI,EAAQhM,KAAK6B,MAAM8F,cAGvB,OAAIqE,KAAUhM,KAAKuB,IAAMyK,IAAUxK,SAAS+P,SAC1CtQ,GAAMgC,aAAaC,IAIrBlD,KAAK+B,cAEL2B,EAAMvC,OAAOC,OAAOpB,KAAKsB,SACzBoC,EAAI0C,MAAQlD,EACZQ,EAAI2D,QAAUpG,EAAMgC,aAAamI,KAAK,KAAMlI,OAE5ClD,MAAK8N,KAAKpK,EAAK,SAAUR,GACnBA,GACFlD,KAAKiL,KAAK,QAAS/H,IAErBkI,KAAKpL,SAGTc,EAAOgD,UAAUsD,QAAU,WACzB,GAAI+H,GAAWnP,KAAKuB,GAAG4N,SACnBqC,EAAQrC,EAAS,EACrB,OAAOA,GAASvL,QAAU,KACnB4N,EAAM5J,aAAe4J,EAAM3J,WAAa,IAAIC,QAGrDhH,EAAOgD,UAAU/B,YAAc,WAC7B,GAAIyP,GAAQxR,KAAKuB,GAAG4N,SAAS,EAE7B,KAAKqC,EAAO,CACV,GAAIrJ,GAAI3G,SAASC,cAAc,IAC/B+P,GAAQhQ,SAASC,cAAc,WAC/B0G,EAAEJ,UAAY,+BACdyJ,EAAMjJ,YAAYJ,GAClBnI,KAAKuB,GAAGgH,YAAYiJ,GACpBxR,KAAK2O,KAAK3O,KAAKuB,IACfvB,KAAK6B,MAAM8G,QAAQR,GAGjBnI,KAAKoH,UACPpH,KAAKuB,GAAGI,UAAUC,IAAI,YAEtB5B,KAAKuB,GAAGI,UAAU8P,OAAO,cAG1BzR"}