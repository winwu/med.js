{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","basic","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","addEventListener","focusElement","textContent","innerText","trim","innerHTML","tagName","textBefore","p","previousElementSibling","section","currentSection","appendChild","insertBefore","nextSibling","moveToStart","schema","type","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","a","href","title","b","i","br","keys","tag","attrs","attrName","args","attrType","push","on","handler","list","once","_once","off","len","emit","arguments","apply","bind","node","toUpperCase","getSelection","focusNode","nodeType","ELEMENT_NODE","parentNode","selection","createRange","focusTo","offset","focusOffset","substringData","textAfter","focus","collapse","range","body","createTextRange","moveToElementText","select","moveToEnd","selectNodeContents","removeAllRanges","addRange","textRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","Error","exec","cb","fns","err","set","val","_set","last","pop","undefined","get","update","toJSON","sync","paragraphs","sections","shouldBeDelete","_scan","toLowerCase","getAttribute","genName","children","child","paragraph","detail","getOffset","start","end","attribute","dataset","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","prev","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","onKeydown","first","remove"],"mappings":"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"}