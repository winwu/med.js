{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","equal","a","b","sort","join","prop","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","element","focusElement","section","focusSection","paragraph","focusParagraph","paragraphs","focusParagraphs","detail","focusDetail","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","p","tagName","textContent","innerText","trim","currentSection","appendChild","insertBefore","nextSibling","moveToStart","renameElements","on","names","removeInlineStyle","removeExtraNodes","removeExtraNode","curr","prev","nodes","children","len","nodeType","TEXT_NODE","appendData","ELEMENT_NODE","innerHTML","parentNode","s","schema","toLowerCase","type","handleEmptyParagraph","createNewParagraph","shouldHandleThisEvent","textAfter","focusTo","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","href","title","i","br","keys","tag","attrs","attrName","args","attrType","push","handler","list","once","_once","off","splice","emit","arguments","apply","node","toUpperCase","getSelection","focusNode","focusType","textBefore","selection","offset","focusOffset","substringData","focus","collapse","moveToEnd","range","createRange","selectNodeContents","removeAllRanges","addRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","selectAllText","insertElement","deleteContents","insertNode","Error","exec","cb","compose","fns","err","bind","set","val","get","_set","last","pop","undefined","update","toJSON","sync","sections","shouldBeDelete","_scan","getAttribute","genName","child","handleUnknownElement","getOffset","start","end","attribute","dataset","createTextNode","replaceChild","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","default","addEventListener","onKeydown","body","setTimeout","walk","first","remove","childContext"],"mappings":"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"}