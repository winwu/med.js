{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","basic","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","addEventListener","focusElement","textContent","innerText","trim","innerHTML","tagName","textBefore","p","previousElementSibling","section","currentSection","appendChild","insertBefore","nextSibling","moveToStart","schema","type","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","a","href","title","b","i","br","keys","tag","attrs","attrName","args","attrType","push","on","handler","list","once","_once","off","len","emit","arguments","apply","bind","node","toUpperCase","getSelection","focusNode","nodeType","ELEMENT_NODE","parentNode","selection","createRange","focusTo","offset","focusOffset","substringData","textAfter","focus","collapse","range","body","createTextRange","moveToElementText","select","moveToEnd","selectNodeContents","removeAllRanges","addRange","textRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","selectAllText","element","Error","exec","cb","fns","err","set","val","_set","last","pop","undefined","get","update","toJSON","sync","paragraphs","sections","shouldBeDelete","_scan","toLowerCase","getAttribute","genName","children","child","paragraph","detail","getOffset","start","end","attribute","dataset","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","prev","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","onKeydown","first","remove"],"mappings":"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"}