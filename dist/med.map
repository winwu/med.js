{"version":3,"file":"./dist/med.min.js","sources":["./dist/med.js"],"names":["window","Emitter","this","events","Caret","editor","Middleware","middleware","Data","id","modified","data","tmp","Observe","structure","HtmlBuilder","Editor","options","call","utils","mixin","Object","create","defaultOptions","context","el","document","createElement","setAttribute","classList","add","caret","bindEvents","handleEmpty","use","middlewares","init","module","exports","define","amd","Med","o1","o2","getOwnPropertyNames","forEach","name","desc","getOwnPropertyDescriptor","defineProperty","preventEvent","e","preventDefault","returnValue","os","userAgent","navigator","test","each","ctx","fn","length","Array","prototype","split","separator","limit","re","RegExp","replace","map","str","clone","obj","Date","copy","setTime","getTime","slice","attr","hasOwnProperty","keyboard","modifiers",224,91,93,18,17,16,8,9,13,20,27,32,37,38,39,40,"super","next","event","code","keyCode","which","mod","ctrl","ctrlKey","option","alt","altKey","shift","shiftKey","command","meta","metaKey","key","element","focusElement","section","focusSection","paragraph","focusParagraph","paragraphs","focusParagraphs","detail","focusDetail","isEmpty","prevent","els","querySelectorAll","parentElement","removeChild","p","tagName","textContent","innerText","trim","currentSection","appendChild","insertBefore","nextSibling","moveToStart","renameElements","on","names","removeInlineStyle","removeExtraNodes","removeExtraNode","curr","prev","nodes","children","len","nodeType","TEXT_NODE","appendData","ELEMENT_NODE","innerHTML","parentNode","s","schema","toLowerCase","type","handleEmptyParagraph","h1","text","h2","h3","h4","h5","h6","blockquote","quoteTpye","figure","figureType","content","ol","ul","li","a","href","title","b","i","br","keys","tag","attrs","attrName","args","attrType","push","handler","list","once","_once","off","emit","arguments","apply","bind","node","toUpperCase","getSelection","focusNode","focusType","focusTo","textBefore","selection","offset","focusOffset","substringData","textAfter","focus","collapse","moveToEnd","range","createRange","selectNodeContents","removeAllRanges","addRange","parentIndex","indexOf","childNodes","setStart","setEnd","left","extractContents","save","rangeCount","getRangeAt","_range","restore","r","startContainer","startOffset","endContainer","endOffset","selectAllText","insertElement","deleteContents","insertNode","Error","exec","cb","compose","fns","err","set","val","_set","last","pop","undefined","get","update","toJSON","sync","sections","shouldBeDelete","_scan","getAttribute","genName","child","handleUnknownElement","getOffset","start","end","attribute","dataset","createTextNode","replaceChild","beforeHTML","beforeText","check","outerHTML","substr","d","json","fromJSON","$paragraph","$section","querySelector","$prev","initElement","createDetail","html","cursor","$detail","c","Math","random","v","toString","default","addEventListener","onKeydown","body","setTimeout","walk","first","remove","childContext"],"mappings":"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"}